<h2>Doctor</h2>

<app-search (search)="searchPatient($event)"></app-search>

<div *ngIf="patientFound">
  <!-- Display patient details -->
  <h2>Patient Details</h2>
  <p>Patient ID: {{ patient.id }}</p>
  <p>Name: {{ patient.name }}</p>
  <p>Age: {{ patient.age }}</p>

  <!-- Display medical history -->
  <h3>Medical History</h3>

  <!-- Chronic Diseases -->
  <h4>Chronic Diseases</h4>
  <table>
    <thead>
      <tr>
        <th>Disease</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let disease of patient.medicalHistory.chronicDiseases">
        <td>{{ disease }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Allergies -->
  <h4>Allergies</h4>
  <table>
    <thead>
      <tr>
        <th>Allergy</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let allergy of patient.medicalHistory.allergies">
        <td>{{ allergy }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Surgeries -->
  <h4>Surgeries</h4>
  <table>
    <thead>
      <tr>
        <th>Surgery</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let surgery of patient.medicalHistory.surgeries">
        <td>{{ surgery }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Medications -->
  <h4>Medications</h4>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Dosage</th>
        <th>Frequency</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let medication of patient.medicalHistory.medications">
        <td>{{ medication.name }}</td>
        <td>{{ medication.dosage }}</td>
        <td>{{ medication.frequency }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Old Prescriptions -->
  <h3>Old Prescriptions</h3>
  <table>
    <thead>
      <tr>
        <th>Prescription</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let prescription of oldPrescriptions">
        <td>{{ prescription }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Button to toggle report section -->
  <button (click)="toggleReportSection()">Toggle Report Section</button>

  <!-- DoctorReportComponent -->
  <div *ngIf="showReportSection">
    <app-doctor-report (reportSubmitted)="handleReportSubmission($event)"></app-doctor-report>
  </div>
</div>

<div *ngIf="!patientFound && searchPerformed">
  <p>No patient found with ID: {{ patientId }}</p>
</div>
